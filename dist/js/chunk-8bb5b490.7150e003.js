(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8bb5b490"],{"08e5":function(e,t,c){"use strict";c("9fa0")},5530:function(e,t,c){"use strict";c.d(t,"a",(function(){return r}));c("b64b"),c("a4d3"),c("4de4"),c("d3b7"),c("e439"),c("159b"),c("dbb4");function n(e,t,c){return t in e?Object.defineProperty(e,t,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[t]=c,e}function o(e,t){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),c.push.apply(c,n)}return c}function r(e){for(var t=1;t<arguments.length;t++){var c=null!=arguments[t]?arguments[t]:{};t%2?o(Object(c),!0).forEach((function(t){n(e,t,c[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):o(Object(c)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(c,t))}))}return e}},"683a":function(e,t,c){"use strict";var n=c("7a23"),o=c("04cc"),r=c.n(o),a=function(e){return Object(n["pushScopeId"])("data-v-e1443936"),e=e(),Object(n["popScopeId"])(),e},s={class:"col-lg-4 col-md-6 d-flex flex-column align-items-center"},i=a((function(){return Object(n["createElementVNode"])("img",{src:r.a,alt:""},null,-1)})),l={class:"process mt-4 d-flex"},d=a((function(){return Object(n["createElementVNode"])("p",{class:"rounded-circle me-2"},"1",-1)})),u=a((function(){return Object(n["createElementVNode"])("p",null,"確認",-1)})),b=[d,u],m=a((function(){return Object(n["createElementVNode"])("p",{class:"rounded-circle me-2"},"2",-1)})),p=a((function(){return Object(n["createElementVNode"])("p",null,"輸入",-1)})),f=[m,p],O=a((function(){return Object(n["createElementVNode"])("p",{class:"rounded-circle me-2"},"3",-1)})),j=a((function(){return Object(n["createElementVNode"])("p",null,"送出",-1)})),h=[O,j];function v(e,t,c,o,r,a){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",s,[i,Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])([["enter d-flex mx-3"],"確認"===this.status&&"active"])},b,2),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])([["sure d-flex mx-3"],"輸入"===this.status&&"active"])},f,2),Object(n["createElementVNode"])("div",{class:Object(n["normalizeClass"])([["done d-flex mx-3"],"送出"===this.status&&"active"])},h,2)])])}var E={props:["status"]},g=(c("08e5"),c("d959")),N=c.n(g);const x=N()(E,[["render",v],["__scopeId","data-v-e1443936"]]);t["a"]=x},"73dc":function(e,t,c){"use strict";c.d(t,"a",(function(){return n})),c.d(t,"b",(function(){return o}));c("d3b7"),c("caad"),c("2532"),c("159b"),c("ac1f"),c("1276");function n(e){var t=!0;return(e.total>=6e3||e.carts.some((function(e){return e.product.CategoryArray.includes("免運費")})))&&(t=!1),t}function o(e){var t=e;return e.forEach((function(e,c){t[c].product.CategoryArray=e.product.category.split(",")})),t}},"76db":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),o=function(e){return Object(n["pushScopeId"])("data-v-d461fda6"),e=e(),Object(n["popScopeId"])(),e},r={class:"container"},a=o((function(){return Object(n["createElementVNode"])("div",{class:"mx-5 my-3"},null,-1)})),s={class:"row justify-content-center"},i={class:"col-12"},l={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},d={class:"breadcrumb d-flex justify-content-end mx-5 px-4"},u={class:"breadcrumb-item"},b=Object(n["createTextVNode"])("首頁"),m=o((function(){return Object(n["createElementVNode"])("li",{class:"breadcrumb-item active colorBlue","aria-current":"page"}," 購物車 ",-1)})),p={class:"col-lg-10 col-md-12 my-5"},f=o((function(){return Object(n["createElementVNode"])("h1",{class:"fw-bold text-center mb-4"},"購物車",-1)})),O={key:0,class:"mx-auto bg-white px-md-5 px-2 py-5 text-center rounded-3 shadow"},j={class:"table position-relative"},h=o((function(){return Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("td",{width:"40%",scope:"col",class:"py-3"},"商品資訊"),Object(n["createElementVNode"])("td",{width:"35%",scope:"col",class:"py-3"},"數量"),Object(n["createElementVNode"])("td",{width:"20%",scope:"col",class:"py-3"},"金額"),Object(n["createElementVNode"])("td",{width:"5%",scope:"col",class:"py-3"})])],-1)})),v={class:"align-middle"},E={class:"text-start"},g={class:"row align-items-center"},N={class:"col-4"},x=["src","alt"],w={class:"col-md-8 m-0 px-md-2 fs-6 fw-bold"},V={class:"d-flex justify-content-center"},y={class:"input-group d-flex justify-content-center"},C=["onClick"],k=o((function(){return Object(n["createElementVNode"])("i",{class:"bi bi-dash"},null,-1)})),B=[k],$={class:"form-control text-center px-0 p-md-1"},T=["onClick"],_=o((function(){return Object(n["createElementVNode"])("i",{class:"bi bi-plus"},null,-1)})),P=[_],S=["onClick"],D=o((function(){return Object(n["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-x-lg",viewBox:"0 0 16 16"},[Object(n["createElementVNode"])("path",{"fill-rule":"evenodd",d:"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z"}),Object(n["createElementVNode"])("path",{"fill-rule":"evenodd",d:"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z"})],-1)})),L=[D],I={class:"row justify-content-end"},U={class:"col-12 text-end mb-1"},q={class:"m-0"},z={class:"d-block text-gray"},A={key:0,class:"d-block"},F={class:"col-12 mb-3"},M={class:"fs-5 text-end text-danger"},J={class:"col-10 col-md-6 col-lg-5"},Z={class:"input-group input-group-sm"},G={key:1,class:"mx-auto bg-white px-md-5 px-2 py-5 text-center rounded-3 shadow"},H=o((function(){return Object(n["createElementVNode"])("h3",{class:"mb-3"},"購物車內沒有商品",-1)})),K=Object(n["createTextVNode"])("前 往 購 物"),Q={key:0,class:"col-10 d-flex justify-content-between mb-2 mb-md-5"},R=o((function(){return Object(n["createElementVNode"])("i",{class:"bi bi-caret-left me-1"},null,-1)})),W=Object(n["createTextVNode"])("繼 續 購 物"),X=Object(n["createTextVNode"])("填 寫 訂 單"),Y=o((function(){return Object(n["createElementVNode"])("i",{class:"bi bi-caret-right ms-1"},null,-1)}));function ee(e,t,c,o,k,_){var D=this,ee=Object(n["resolveComponent"])("router-link"),te=Object(n["resolveComponent"])("shopProcess");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[a,Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",i,[Object(n["createElementVNode"])("nav",l,[Object(n["createElementVNode"])("ol",d,[Object(n["createElementVNode"])("li",u,[Object(n["createVNode"])(ee,{to:"/"},{default:Object(n["withCtx"])((function(){return[b]})),_:1})]),m])])]),Object(n["createVNode"])(te,{status:"確認"}),Object(n["createElementVNode"])("div",p,[f,this.cart.carts&&0===this.cart.carts.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("main",G,[H,Object(n["createVNode"])(ee,{to:"/User/ProductList",class:"btn btn-custom-Orange px-5 py-1"},{default:Object(n["withCtx"])((function(){return[K]})),_:1})])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("main",O,[Object(n["createElementVNode"])("table",j,[h,Object(n["createElementVNode"])("tbody",v,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(k.cart.carts,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t.id},[Object(n["createElementVNode"])("td",E,[Object(n["createElementVNode"])("div",g,[Object(n["createElementVNode"])("div",N,[Object(n["createElementVNode"])("img",{src:t.product.imageUrl,alt:t.product.title+"的商品照片"},null,8,x)]),Object(n["createElementVNode"])("p",w,Object(n["toDisplayString"])(t.product.title),1)])]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",V,[Object(n["createElementVNode"])("div",y,[Object(n["createElementVNode"])("button",{type:"button",class:"btn px-0 px-sm-1 px-md-2 border",onClick:function(e){return _.minusCart(t)}},B,8,C),Object(n["createElementVNode"])("span",$,Object(n["toDisplayString"])(t.qty),1),Object(n["createElementVNode"])("button",{type:"button",class:"btn px-0 px-sm-1 px-md-2 border",onClick:function(e){return _.addCart(t)}},P,8,T)])])]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("h5",null,Object(n["toDisplayString"])(e.$filters.currency(t.total))+" 元",1)]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("button",{type:"button",class:"btn-red bg-transparent border-0",onClick:function(e){return _.deleteCart(t)}},L,8,S)])])})),128))])]),Object(n["createElementVNode"])("div",I,[Object(n["createElementVNode"])("div",U,[Object(n["createElementVNode"])("p",q,[Object(n["createElementVNode"])("small",z," 商品金額NT $"+Object(n["toDisplayString"])(e.$filters.currency(this.cart.total)),1),k.is_UseCoupon?(Object(n["openBlock"])(),Object(n["createElementBlock"])("small",A," - 使用優惠折扣NT $"+Object(n["toDisplayString"])(e.$filters.currency(this.cart.total-parseInt(this.cart.final_total))),1)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("small",{class:Object(n["normalizeClass"])([["d-block"],!this.cart.isFreight&&"text-decoration-line-through"])}," + 運費NT "+Object(n["toDisplayString"])(this.freight),3)])]),Object(n["createElementVNode"])("div",F,[Object(n["createElementVNode"])("p",M," 總金額NT $"+Object(n["toDisplayString"])(this.cart.isFreight?e.$filters.currency(parseInt(this.cart.final_total)+this.freight):e.$filters.currency(parseInt(this.cart.final_total))),1)]),Object(n["createElementVNode"])("div",J,[Object(n["createElementVNode"])("div",Z,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入折扣碼","onUpdate:modelValue":t[0]||(t[0]=function(e){return D.code=e})},null,512),[[n["vModelText"],this.code]]),Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-discount btn-outline-success input-group-text",onClick:t[1]||(t[1]=function(e){return _.addCoupon(!0,D.code)})}," 套用優惠卷 ")])])])]))]),this.cart.carts&&0===this.cart.carts.length?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Q,[Object(n["createVNode"])(ee,{to:"/User/ProductList",class:"btn btn-custom-Blue px-1 px-sm-2 px-md-4 py-2"},{default:Object(n["withCtx"])((function(){return[R,W]})),_:1}),Object(n["createElementVNode"])("button",{class:"btn btn-outline-danger px-1 px-sm-2 px-md-4 py-2",onClick:t[2]||(t[2]=function(e){return _.deleteAllCart()})}," 清 空 購 物 車 "),Object(n["createVNode"])(ee,{to:"/User/Order",class:"btn btn-custom-Orange px-1 px-sm-2 px-md-4 py-2"},{default:Object(n["withCtx"])((function(){return[X,Y]})),_:1})]))])])}var te=c("2909"),ce=c("5530"),ne=(c("99af"),c("683a")),oe=c("73dc"),re=c("fc60"),ae={inject:["emitter"],components:{shopProcess:ne["a"]},data:function(){return{cart:{},freight:300,code:"",is_UseCoupon:!1}},methods:{getCart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/cart");this.$http.get(t).then((function(t){t.data.data.carts.length<1&&localStorage.removeItem("CouponCode"),e.cart=Object(ce["a"])({},t.data.data),e.cart.carts=Object(te["a"])(Object(oe["b"])(t.data.data.carts)),e.cart.isFreight=Object(oe["a"])(t.data.data),e.checkCoupon(Object(re["a"])("CouponCode"))}))},minusCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/cart/").concat(e.id);if(e.qty<=1)this.$swal({showConfirmButton:!0,icon:"error",title:"數字型別錯誤",Text:"請輸入數字唷!"});else{var n={product_id:e.product_id,qty:--e.qty};this.$http.put(c,{data:n}).then((function(e){t.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",t.$swal.stopTimer),e.addEventListener("mouseleave",t.$swal.resumeTimer)},icon:"success",title:"更新購物車成功!"}),t.getCart()})).catch((function(e){t.$swal({showConfirmButton:!0,icon:"error",title:"更新失敗",Text:e})}))}},addCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/cart/").concat(e.id),n={product_id:e.product_id,qty:++e.qty};this.$http.put(c,{data:n}).then((function(e){t.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",t.$swal.stopTimer),e.addEventListener("mouseleave",t.$swal.resumeTimer)},icon:"success",title:"更新購物車成功!"}),t.getCart()})).catch((function(e){t.$swal({showConfirmButton:!0,icon:"error",title:"更新失敗",Text:e})}))},deleteCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/cart/").concat(e.id);this.$http.delete(c).then((function(e){t.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",t.$swal.stopTimer),e.addEventListener("mouseleave",t.$swal.resumeTimer)},icon:"success",title:"已經移出購物車"}),t.getCart(),t.emitter.emit("update-cartNumber")})).catch((function(e){t.$swal({showConfirmButton:!0,icon:"error",title:"清空失敗",Text:e})}))},deleteAllCart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/carts");this.$swal({title:"確定刪除所有商品嗎?",text:"你將清空購物車",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"我想清楚了",cancelButtonText:"再想想"}).then((function(c){c.isConfirmed&&(e.$swal("已經清空囉!","你將到宇宙深處才能找到他們...","success"),e.$http.delete(t).then((function(t){localStorage.removeItem("CouponCode"),e.getCart(),e.emitter.emit("update-cartNumber")})).catch((function(t){e.$swal({showConfirmButton:!0,icon:"error",title:"清空失敗",Text:t})})))}))},addCoupon:function(e,t){var c=this,n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/coupon"),o={code:t};this.$http.post(n,{data:o}).then((function(n){n.data.success?(c.cart.final_total=n.data.data.final_total,c.is_UseCoupon=!0,Object(re["b"])("CouponCode",t),e&&c.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",c.$swal.stopTimer),e.addEventListener("mouseleave",c.$swal.resumeTimer)},icon:"success",title:"套用優惠卷成功!"})):c.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",c.$swal.stopTimer),e.addEventListener("mouseleave",c.$swal.resumeTimer)},icon:"error",title:n.data.message})}))},checkCoupon:function(e){null!==e&&(this.is_UseCoupon=!0,this.code=e,this.addCoupon(!1,this.code))}},created:function(){this.getCart()},mounted:function(){var e=this;this.emitter.on("update-cart",(function(){e.getCart()}))}},se=(c("ac06"),c("d959")),ie=c.n(se);const le=ie()(ae,[["render",ee],["__scopeId","data-v-d461fda6"]]);t["default"]=le},"9fa0":function(e,t,c){},ac06:function(e,t,c){"use strict";c("eca5")},b64b:function(e,t,c){var n=c("23e7"),o=c("7b0b"),r=c("df75"),a=c("d039"),s=a((function(){r(1)}));n({target:"Object",stat:!0,forced:s},{keys:function(e){return r(o(e))}})},dbb4:function(e,t,c){var n=c("23e7"),o=c("83ab"),r=c("56ef"),a=c("fc6a"),s=c("06cf"),i=c("8418");n({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){var t,c,n=a(e),o=s.f,l=r(n),d={},u=0;while(l.length>u)c=o(n,t=l[u++]),void 0!==c&&i(d,t,c);return d}})},e439:function(e,t,c){var n=c("23e7"),o=c("d039"),r=c("fc6a"),a=c("06cf").f,s=c("83ab"),i=o((function(){a(1)})),l=!s||i;n({target:"Object",stat:!0,forced:l,sham:!s},{getOwnPropertyDescriptor:function(e,t){return a(r(e),t)}})},eca5:function(e,t,c){}}]);
//# sourceMappingURL=chunk-8bb5b490.7150e003.js.map