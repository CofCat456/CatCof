(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-acf5cc1e"],{"76db":function(e,t,c){"use strict";c.r(t);var o=c("7a23"),n=function(e){return Object(o["pushScopeId"])("data-v-04de4c22"),e=e(),Object(o["popScopeId"])(),e},a=n((function(){return Object(o["createElementVNode"])("div",{class:"loadingio-spinner-ripple-3xq5u6jldre"},[Object(o["createElementVNode"])("div",{class:"ldio-dwik2dnj2i"},[Object(o["createElementVNode"])("div"),Object(o["createElementVNode"])("div")])],-1)})),r={class:"container"},s=n((function(){return Object(o["createElementVNode"])("div",{class:"mx-5 my-3"},null,-1)})),i={class:"row justify-content-center"},l={class:"col-11 mx-5 my-3"},d={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},u={class:"breadcrumb d-flex justify-content-end"},m={class:"breadcrumb-item"},b=Object(o["createTextVNode"])("首頁"),p=n((function(){return Object(o["createElementVNode"])("li",{class:"breadcrumb-item active colorBlue","aria-current":"page"}," 購物車 ",-1)})),h={class:"col-lg-10 col-md-12 col-11 my-5"},f=n((function(){return Object(o["createElementVNode"])("h1",{class:"fw-bold text-center mb-4"},"購物車",-1)})),j={key:0,class:"mx-auto bg-white px-md-5 px-3 py-5 text-center rounded-3 shadow"},O={class:"table position-relative"},g=n((function(){return Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("td",{width:"40%",scope:"col",class:"py-3"},"商品資訊"),Object(o["createElementVNode"])("td",{width:"35%",scope:"col",class:"py-3"},"數量"),Object(o["createElementVNode"])("td",{width:"20%",scope:"col",class:"py-3"},"金額"),Object(o["createElementVNode"])("td",{width:"5%",scope:"col",class:"py-3"})])],-1)})),N={class:"align-middle"},E={class:"text-start"},v={class:"row align-items-center"},V={class:"col-4 d-md-block d-none"},C=["src","alt","onClick"],w={class:"col-md-8 m-0 px-md-2 fw-bold"},x={class:"d-flex justify-content-center"},y={class:"input-group d-flex justify-content-center"},k=["onClick"],B=n((function(){return Object(o["createElementVNode"])("i",{class:"bi bi-dash"},null,-1)})),$=[B],T={class:"form-control text-center px-0 p-md-1"},L=["onClick"],_=n((function(){return Object(o["createElementVNode"])("i",{class:"bi bi-plus"},null,-1)})),P=[_],S=["onClick"],I=n((function(){return Object(o["createElementVNode"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-x-lg",viewBox:"0 0 16 16"},[Object(o["createElementVNode"])("path",{"fill-rule":"evenodd",d:"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z"}),Object(o["createElementVNode"])("path",{"fill-rule":"evenodd",d:"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z"})],-1)})),U=[I],D={class:"row justify-content-end"},q={class:"col-12 text-end mb-1"},F={class:"m-0"},M={class:"d-block text-gray"},A={key:0,class:"d-block"},J={class:"col-12 mb-3"},Z={class:"fs-5 text-end text-danger"},z={class:"col-md-10 col-11 col-md-6 col-lg-5"},G={class:"input-group input-group-sm"},H={key:1,class:"mx-auto bg-white px-md-5 px-2 py-5 text-center rounded-3 shadow"},K=n((function(){return Object(o["createElementVNode"])("h3",{class:"mb-3"},"購物車內沒有商品",-1)})),Q=Object(o["createTextVNode"])("前 往 購 物"),R={key:0,class:"col-md-10 col-11 d-flex justify-content-between mb-5"},W=n((function(){return Object(o["createElementVNode"])("i",{class:"bi bi-caret-left me-1"},null,-1)})),X=Object(o["createTextVNode"])("繼 續 購 物"),Y=Object(o["createTextVNode"])("填 寫 訂 單"),ee=n((function(){return Object(o["createElementVNode"])("i",{class:"bi bi-caret-right ms-1"},null,-1)}));function te(e,t,c,n,B,_){var I=this,te=Object(o["resolveComponent"])("Loading"),ce=Object(o["resolveComponent"])("router-link"),oe=Object(o["resolveComponent"])("shopProcess");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(te,{active:B.isLoading},{default:Object(o["withCtx"])((function(){return[a]})),_:1},8,["active"]),Object(o["createElementVNode"])("div",r,[s,Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("nav",d,[Object(o["createElementVNode"])("ol",u,[Object(o["createElementVNode"])("li",m,[Object(o["createVNode"])(ce,{to:"/"},{default:Object(o["withCtx"])((function(){return[b]})),_:1})]),p])])]),Object(o["createVNode"])(oe,{status:"確認"}),Object(o["createElementVNode"])("div",h,[f,this.cart.carts&&0===this.cart.carts.length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("main",H,[K,Object(o["createVNode"])(ce,{to:"/User/ProductList",class:"btn btn-custom-Orange px-5 py-1"},{default:Object(o["withCtx"])((function(){return[Q]})),_:1})])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("main",j,[Object(o["createElementVNode"])("table",O,[g,Object(o["createElementVNode"])("tbody",N,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(B.cart.carts,(function(t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:t.id},[Object(o["createElementVNode"])("td",E,[Object(o["createElementVNode"])("div",v,[Object(o["createElementVNode"])("div",V,[Object(o["createElementVNode"])("img",{src:t.product.imageUrl,alt:t.product.title+"的商品照片",onClick:function(e){return _.getProductId(t.product.id)}},null,8,C)]),Object(o["createElementVNode"])("p",w,Object(o["toDisplayString"])(t.product.title),1)])]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",x,[Object(o["createElementVNode"])("div",y,[Object(o["createElementVNode"])("button",{type:"button",class:"btn px-0 px-sm-1 px-md-2 border",onClick:function(e){return _.minusCart(t)}},$,8,k),Object(o["createElementVNode"])("span",T,Object(o["toDisplayString"])(t.qty),1),Object(o["createElementVNode"])("button",{type:"button",class:"btn px-0 px-sm-1 px-md-2 border",onClick:function(e){return _.addCart(t)}},P,8,L)])])]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("h5",null,Object(o["toDisplayString"])(e.$filters.currency(t.total))+" 元",1)]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("button",{type:"button",class:"btn-red bg-transparent border-0",onClick:function(e){return _.deleteCart(t)}},U,8,S)])])})),128))])]),Object(o["createElementVNode"])("div",D,[Object(o["createElementVNode"])("div",q,[Object(o["createElementVNode"])("p",F,[Object(o["createElementVNode"])("small",M," 商品金額NT $"+Object(o["toDisplayString"])(e.$filters.currency(this.cart.total)),1),B.is_UseCoupon?(Object(o["openBlock"])(),Object(o["createElementBlock"])("small",A," - 使用優惠折扣NT $"+Object(o["toDisplayString"])(e.$filters.currency(this.cart.total-parseInt(this.cart.final_total))),1)):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("small",{class:Object(o["normalizeClass"])([["d-block"],!this.cart.isFreight&&"text-decoration-line-through"])}," + 運費NT "+Object(o["toDisplayString"])(this.freight),3)])]),Object(o["createElementVNode"])("div",J,[Object(o["createElementVNode"])("p",Z," 總金額NT $"+Object(o["toDisplayString"])(this.cart.isFreight?e.$filters.currency(parseInt(this.cart.final_total)+this.freight):e.$filters.currency(parseInt(this.cart.final_total))),1)]),Object(o["createElementVNode"])("div",z,[Object(o["createElementVNode"])("div",G,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"請輸入折扣碼","onUpdate:modelValue":t[0]||(t[0]=function(e){return I.code=e})},null,512),[[o["vModelText"],this.code]]),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-discount btn-outline-success input-group-text",onClick:t[1]||(t[1]=function(e){return _.addCoupon(!0,I.code)})}," 套用優惠卷 ")])])])]))]),this.cart.carts&&0===this.cart.carts.length?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",R,[Object(o["createVNode"])(ce,{to:"/User/ProductList",class:"btn btn-custom-Blue px-md-4 py-2"},{default:Object(o["withCtx"])((function(){return[W,X]})),_:1}),Object(o["createElementVNode"])("button",{class:"btn btn-outline-danger px-md-4 py-2",onClick:t[2]||(t[2]=function(e){return _.deleteAllCart()})}," 清 空 購 物 車 "),Object(o["createVNode"])(ce,{to:"/User/Order",class:"btn btn-custom-Orange px-md-4 py-2"},{default:Object(o["withCtx"])((function(){return[Y,ee]})),_:1})]))])])],64)}var ce=c("2909"),oe=c("5530"),ne=(c("99af"),c("683a")),ae=c("73dc"),re=c("fc60"),se={inject:["emitter"],components:{shopProcess:ne["a"]},data:function(){return{cart:{},freight:300,code:"",is_UseCoupon:!1,isLoading:!1}},methods:{getCart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/cart");this.isLoading=!0,this.$http.get(t).then((function(t){t.data.success&&(e.isLoading=!1,t.data.data.carts.length<1&&localStorage.removeItem("CouponCode"),e.cart=Object(oe["a"])({},t.data.data),e.cart.carts=Object(ce["a"])(Object(ae["b"])(t.data.data.carts)),e.cart.isFreight=Object(ae["a"])(t.data.data),e.checkCoupon(Object(re["a"])("CouponCode")))}))},minusCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/cart/").concat(e.id);if(this.isLoading=!0,e.qty<=1)this.$swal({showConfirmButton:!0,icon:"error",title:"數字型別錯誤",Text:"請輸入數字唷!"});else{var o={product_id:e.product_id,qty:--e.qty};this.$http.put(c,{data:o}).then((function(e){e.data.success&&(t.isLoading=!1,t.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",t.$swal.stopTimer),e.addEventListener("mouseleave",t.$swal.resumeTimer)},icon:"success",title:"更新購物車成功!"}),t.getCart())})).catch((function(e){t.$swal({showConfirmButton:!0,icon:"error",title:"更新失敗",Text:e})}))}},addCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/cart/").concat(e.id);this.isLoading=!0;var o={product_id:e.product_id,qty:++e.qty};this.$http.put(c,{data:o}).then((function(e){e.data.success&&(t.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",t.$swal.stopTimer),e.addEventListener("mouseleave",t.$swal.resumeTimer)},icon:"success",title:"更新購物車成功!"}),t.getCart())})).catch((function(e){t.$swal({showConfirmButton:!0,icon:"error",title:"更新失敗",Text:e})}))},deleteCart:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/cart/").concat(e.id);this.isLoading=!0,this.$http.delete(c).then((function(e){e.data.success&&(t.isLoading=!1,t.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",t.$swal.stopTimer),e.addEventListener("mouseleave",t.$swal.resumeTimer)},icon:"success",title:"已經移出購物車"}),t.getCart(),t.emitter.emit("update-cartNumber"))})).catch((function(e){t.$swal({showConfirmButton:!0,icon:"error",title:"清空失敗",Text:e})}))},deleteAllCart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/carts");this.$swal({title:"確定刪除所有商品嗎?",text:"你將清空購物車",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"我想清楚了",cancelButtonText:"再想想"}).then((function(c){c.isConfirmed&&(e.$swal("已經清空囉!","你將到宇宙深處才能找到他們...","success"),e.$http.delete(t).then((function(t){t.data.success&&(localStorage.removeItem("CouponCode"),e.getCart(),e.emitter.emit("update-cartNumber"))})).catch((function(t){e.$swal({showConfirmButton:!0,icon:"error",title:"清空失敗",Text:t})})))}))},addCoupon:function(e,t){var c=this,o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/coupon");this.isLoading=!0;var n={code:t};this.$http.post(o,{data:n}).then((function(o){o.data.success?(c.isLoading=!1,c.cart.final_total=o.data.data.final_total,c.is_UseCoupon=!0,Object(re["b"])("CouponCode",t),e&&c.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",c.$swal.stopTimer),e.addEventListener("mouseleave",c.$swal.resumeTimer)},icon:"success",title:"套用優惠卷成功!"})):c.$swal({toast:!0,position:"top-end",showConfirmButton:!1,timer:1500,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",c.$swal.stopTimer),e.addEventListener("mouseleave",c.$swal.resumeTimer)},icon:"error",title:o.data.message})}))},checkCoupon:function(e){null!==e&&(this.is_UseCoupon=!0,this.code=e,this.addCoupon(!1,this.code))},getProductId:function(e){this.$router.push("/User/product/".concat(e))}},created:function(){this.getCart()},mounted:function(){var e=this;this.emitter.on("update-cart",(function(){e.getCart()}))}},ie=(c("88ad"),c("d959")),le=c.n(ie);const de=le()(se,[["render",te],["__scopeId","data-v-04de4c22"]]);t["default"]=de},"88ad":function(e,t,c){"use strict";c("a784")},a784:function(e,t,c){}}]);
//# sourceMappingURL=chunk-acf5cc1e.379a7bb9.js.map