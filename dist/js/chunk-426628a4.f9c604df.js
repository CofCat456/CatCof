(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-426628a4"],{"31ef":function(e,t,r){"use strict";r.r(t);r("b0c0");var c=r("7a23"),n=Object(c["createElementVNode"])("div",{class:"loadingio-spinner-ripple-3xq5u6jldre"},[Object(c["createElementVNode"])("div",{class:"ldio-dwik2dnj2i"},[Object(c["createElementVNode"])("div"),Object(c["createElementVNode"])("div")])],-1),o={class:"text-end mt-3"},l={class:"table mt-4"},a=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",{width:"450"},"訂單編號"),Object(c["createElementVNode"])("th",{width:"200"},"顧客姓名"),Object(c["createElementVNode"])("th",{width:"150"},"付款方式"),Object(c["createElementVNode"])("th",{width:"120"},"狀態"),Object(c["createElementVNode"])("th",{width:"300"},"備註"),Object(c["createElementVNode"])("th",{width:"200"},"編輯")])],-1),d={class:"btn-group"},i=["onClick"],s=["onClick"];function m(e,t,r,m,b,u){var O=Object(c["resolveComponent"])("ToastMessage"),p=Object(c["resolveComponent"])("Loading"),j=Object(c["resolveComponent"])("Pagination"),f=Object(c["resolveComponent"])("OrderModal"),E=Object(c["resolveComponent"])("DeleteModel");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(O),Object(c["createVNode"])(p,{active:b.isLoading},{default:Object(c["withCtx"])((function(){return[n]})),_:1},8,["active"]),Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("button",{class:"btn btn-danger",type:"button",onClick:t[0]||(t[0]=function(e){return u.DeleteAllOrder()})}," 刪除全部訂單 ")]),Object(c["createElementVNode"])("table",l,[a,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(b.orderList,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:e.id},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.id),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.user.name),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.user.payment),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("span",{class:Object(c["normalizeClass"])(["已付款"===e.is_paid?"text-success":"text-muted"])},Object(c["toDisplayString"])(e.is_paid?"已付款":"未付款"),3)]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(e.remark?e.remark:"無"),1)]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",d,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(t){return u.openModel(e)}}," 編輯 ",8,i),Object(c["createElementVNode"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return u.openDeleteModel(e)}}," 刪除 ",8,s)])])])})),128))])]),Object(c["createVNode"])(j,{pages:b.pagination,onEmitAdpages:u.getOrderList,onEmitAdPrev:u.getOrderList,onEmitAdNext:u.getOrderList},null,8,["pages","onEmitAdpages","onEmitAdPrev","onEmitAdNext"]),Object(c["createVNode"])(f,{ref:"OrderModal",Order:b.tempOrder,onUpdateOrder:u.updateOrder},null,8,["Order","onUpdateOrder"]),Object(c["createVNode"])(E,{ref:"deleteModal",item:u.OrderName(b.tempOrder.user.name),id:b.tempOrder.id,onDelItem:u.DeleteOrder},null,8,["item","id","onDelItem"])],64)}var b=r("5530"),u=(r("99af"),r("b64b"),function(e){return Object(c["pushScopeId"])("data-v-c8ffb8d2"),e=e(),Object(c["popScopeId"])(),e}),O={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},p={class:"modal-dialog modal-xl",role:"document"},j={class:"modal-content border-0"},f=u((function(){return Object(c["createElementVNode"])("div",{class:"modal-header bg-dark text-white"},[Object(c["createElementVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["createElementVNode"])("span",null,"編輯訂單")]),Object(c["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)})),E={class:"modal-body"},V={class:"row"},h={class:"col-sm-12 px-3"},N={class:"mb-3"},v=u((function(){return Object(c["createElementVNode"])("label",{for:"id",class:"form-label"},"訂單編號",-1)})),g={class:"row gx-3"},y=u((function(){return Object(c["createElementVNode"])("h5",{class:"px-2"},"顧客資料（可更改）",-1)})),x={class:"mt-2 mb-3 col-md-6 px-2"},k=u((function(){return Object(c["createElementVNode"])("label",{for:"name",class:"form-label"},"姓名",-1)})),M={class:"mb-3 col-md-6 px-2"},w=u((function(){return Object(c["createElementVNode"])("label",{for:"email",class:"form-label"},"E-mail",-1)})),D={class:"row gx-3"},B={class:"mb-3 col"},L=u((function(){return Object(c["createElementVNode"])("label",{for:"tel",class:"form-label"},"電話",-1)})),S={class:"mb-3 col"},C=u((function(){return Object(c["createElementVNode"])("label",{for:"payment",class:"form-label"},"付款方式",-1)})),$=["value","selected"],T={class:"mb-3"},A=u((function(){return Object(c["createElementVNode"])("label",{for:"address",class:"form-label"},"地址",-1)})),U=u((function(){return Object(c["createElementVNode"])("hr",null,null,-1)})),_={class:"row gx-3"},I=u((function(){return Object(c["createElementVNode"])("h5",{class:"px-2"},"訂單資訊",-1)})),F={class:"mt-2 mb-3 col-md-6 px-2"},z=u((function(){return Object(c["createElementVNode"])("label",{for:"total",class:"form-label"},"訂單總價格(不含運)",-1)})),J={class:"form-control"},P={class:"mt-2 mb-3 col-md-6 px-2"},q=u((function(){return Object(c["createElementVNode"])("label",{class:"form-label"},"是否付款 (可更改）",-1)})),R={class:"form-control"},X=u((function(){return Object(c["createElementVNode"])("label",{for:"未付款"},"未付款",-1)})),G=u((function(){return Object(c["createElementVNode"])("label",{for:"已付款"},"已付款",-1)})),H={key:0,class:"row gx-3"},K={class:"mb-3 col"},Q=u((function(){return Object(c["createElementVNode"])("label",{for:"num",class:"form-label"},"產品數量",-1)})),W={class:"form-control"},Y={class:"mb-3 col"},Z=u((function(){return Object(c["createElementVNode"])("label",{for:"payment",class:"form-label"},"產品列表",-1)})),ee={class:"form-control"},te={class:"modal-footer"},re=u((function(){return Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1)}));function ce(e,t,r,n,o,l){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",O,[Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("div",j,[f,Object(c["createElementVNode"])("div",E,[Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("div",N,[v,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",id:"id",disabled:"",placeholder:"訂單編號","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.tempOrder.id=e})},null,512),[[c["vModelText"],o.tempOrder.id]])]),Object(c["createElementVNode"])("div",g,[y,Object(c["createElementVNode"])("div",x,[k,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",id:"name",placeholder:"顧客姓名","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.tempOrder.user.name=e})},null,512),[[c["vModelText"],o.tempOrder.user.name]])]),Object(c["createElementVNode"])("div",M,[w,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"email",pattern:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",class:"form-control",id:"email",placeholder:"顧客信箱","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.tempOrder.user.email=e})},null,512),[[c["vModelText"],o.tempOrder.user.email]])])]),Object(c["createElementVNode"])("div",D,[Object(c["createElementVNode"])("div",B,[L,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",id:"tel",placeholder:"顧客電話","onUpdate:modelValue":t[3]||(t[3]=function(e){return o.tempOrder.user.tel=e})},null,512),[[c["vModelText"],o.tempOrder.user.tel]])]),Object(c["createElementVNode"])("div",S,[C,Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{id:"payment",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=function(e){return o.tempOrder.user.payment=e})},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(o.payment,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{key:e,value:e,selected:o.tempOrder.user.payment===e},Object(c["toDisplayString"])(e),9,$)})),128))],512),[[c["vModelSelect"],o.tempOrder.user.payment]])]),Object(c["createElementVNode"])("div",T,[A,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",id:"address",placeholder:"顧客地址","onUpdate:modelValue":t[5]||(t[5]=function(e){return o.tempOrder.user.address=e})},null,512),[[c["vModelText"],o.tempOrder.user.address]])])]),U,Object(c["createElementVNode"])("div",_,[I,Object(c["createElementVNode"])("div",F,[z,Object(c["createElementVNode"])("div",J,[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(o.tempOrder.total),1)])]),Object(c["createElementVNode"])("div",P,[q,Object(c["createElementVNode"])("div",R,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",id:"未付款",value:"false","onUpdate:modelValue":t[6]||(t[6]=function(e){return o.tempOrder.is_paid=e})},null,512),[[c["vModelRadio"],o.tempOrder.is_paid]]),X,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"radio",id:"已付款",value:"true","onUpdate:modelValue":t[7]||(t[7]=function(e){return o.tempOrder.is_paid=e}),class:"ms-2"},null,512),[[c["vModelRadio"],o.tempOrder.is_paid]]),G])])]),o.tempOrder.products?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",H,[Object(c["createElementVNode"])("div",K,[Q,Object(c["createElementVNode"])("div",W,[Object(c["createElementVNode"])("p",null,Object(c["toDisplayString"])(Object.keys(o.tempOrder.products).length),1)])]),Object(c["createElementVNode"])("div",Y,[Z,Object(c["createElementVNode"])("select",ee,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(o.tempOrder.products,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{key:e},Object(c["toDisplayString"])(e.product.title),1)})),128))])])])):Object(c["createCommentVNode"])("",!0)])])]),Object(c["createElementVNode"])("div",te,[re,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[8]||(t[8]=function(t){return e.$emit("update-order",o.tempOrder)})}," 確認 ")])])])],512)}r("e9c4");var ne=r("db44"),oe={props:{Order:{type:Object,default:function(){return{}}}},data:function(){return{modal:{},tempOrder:{user:{}},payment:["VISA信用卡","ATM轉帳"]}},watch:{Order:function(){this.tempOrder=JSON.parse(JSON.stringify(this.Order))}},mixins:[ne["a"]]},le=(r("ddcf"),r("d959")),ae=r.n(le);const de=ae()(oe,[["render",ce],["__scopeId","data-v-c8ffb8d2"]]);var ie=de,se=r("139f"),me=r("f367"),be=r("1799"),ue={components:{OrderModal:ie,DeleteModel:se["a"],ToastMessage:me["a"],Pagination:be["a"]},inject:["emitter"],data:function(){return{orderList:[],pagination:{},tempOrder:{user:{}},isLoading:!1,Fright:300}},methods:{openModel:function(e){this.tempOrder=Object(b["a"])({},e);var t=this.$refs.OrderModal;t.showModel()},openDeleteModel:function(e){this.tempOrder=Object(b["a"])({},e);var t=this.$refs.deleteModal;t.showModel()},getOrderList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/admin/orders?page=").concat(t);this.isLoading=!0,this.$http.get(r).then((function(t){e.isLoading=!1,t.data.success&&(e.orderList=t.data.orders,e.pagination=t.data.pagination)}))},updateOrder:function(e){var t=this;this.tempOrder=e;var r="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/admin/order/").concat(e.id),c=this.$refs.OrderModal;this.$http.put(r,{data:this.tempOrder}).then((function(e){c.hideModel(),t.$httpMessageState(e,"更新訂單"),e.data.success&&t.getOrderList()}))},DeleteOrder:function(e){var t=this,r="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/admin/order/").concat(e),c=this.$refs.deleteModal;this.$http.delete(r).then((function(e){t.$httpMessageState(e,"刪除訂單"),c.hideModel(),t.getOrderList()}))},DeleteAllOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/admin/orders/all"),r=this.$refs.deleteModal;this.$swal({title:"確認刪除所有訂單嗎",text:"確認後將清除所有訂單，並再也找不回他們...",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"要拼就拼到底",cancelButtonText:"冷靜"}).then((function(c){c.isConfirmed&&(e.$swal("已經清空囉!","你將到宇宙深處才能找到他們...","success"),e.$http.delete(t).then((function(t){r.hideModel(),e.getOrderList()})))}))},OrderName:function(e){return"".concat(e," 的訂單")}},created:function(){this.getOrderList()}};const Oe=ae()(ue,[["render",m]]);t["default"]=Oe},b0c0:function(e,t,r){var c=r("83ab"),n=r("5e77").EXISTS,o=r("e330"),l=r("9bf2").f,a=Function.prototype,d=o(a.toString),i=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,s=o(i.exec),m="name";c&&!n&&l(a,m,{configurable:!0,get:function(){try{return s(i,d(this))[1]}catch(e){return""}}})},ced3:function(e,t,r){},ddcf:function(e,t,r){"use strict";r("ced3")}}]);
//# sourceMappingURL=chunk-426628a4.f9c604df.js.map