{"version":3,"sources":["webpack:///./src/views/UserCart.vue","webpack:///./src/views/UserCart.vue?52e4","webpack:///./src/views/UserCart.vue?2c67"],"names":["class","_createElementVNode","style","aria-label","aria-current","width","scope","_hoisted_24","_hoisted_28","xmlns","height","fill","viewBox","fill-rule","d","_hoisted_31","_createElementBlock","_hoisted_2","_createVNode","_component_router_link","to","_hoisted_9","_component_shopProcess","status","_hoisted_11","cart","carts","length","_hoisted_43","_hoisted_14","_Fragment","_renderList","$data","item","key","id","src","product","imageUrl","alt","title","_toDisplayString","type","onClick","$options","qty","_ctx","currency","total","parseInt","final_total","isFreight","freight","placeholder","code","$event","_hoisted_46","inject","components","shopProcess","data","is_UseCoupon","methods","getCart","url","process","this","$http","get","then","res","localStorage","removeItem","filterFreight","checkFrieht","checkCoupon","getLocalStorage","minusCart","$swal","showConfirmButton","icon","Text","product_id","put","toast","position","timer","timerProgressBar","didOpen","addEventListener","stopTimer","resumeTimer","catch","err","addCart","deleteCart","delete","emitter","emit","deleteAllCart","text","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","result","isConfirmed","addCoupon","isAdd","api","tempCoupon","post","success","savaLocalStorage","message","CouponCode","created","mounted","on","__exports__","render"],"mappings":"uQACOA,MAAM,a,uBACTC,gCAA6B,OAAxBD,MAAM,aAAW,Y,GACjBA,MAAM,8B,GACJA,MAAM,oB,GACJE,MAAA,kCAAqCC,aAAW,c,GAC/CH,MAAM,yC,GACJA,MAAM,mB,+BACY,M,uBAEtBC,gCAEK,MAFDD,MAAM,mCAAmCI,eAAa,QAAO,SAEjE,M,GAKDJ,MAAM,mC,uBACTC,gCAA6C,MAAzCD,MAAM,4BAA2B,OAAG,M,SAGtCA,MAAM,mE,GAECA,MAAM,2B,uBACXC,gCAOQ,cANNA,gCAKK,WAJHA,gCAAkD,MAA9CI,MAAM,MAAMC,MAAM,MAAMN,MAAM,QAAO,QACzCC,gCAAgD,MAA5CI,MAAM,MAAMC,MAAM,MAAMN,MAAM,QAAO,MACzCC,gCAAgD,MAA5CI,MAAM,MAAMC,MAAM,MAAMN,MAAM,QAAO,MACzCC,gCAA6C,MAAzCI,MAAM,KAAKC,MAAM,MAAMN,MAAM,aALrC,M,GAQOA,MAAM,gB,GAELA,MAAM,c,GACHA,MAAM,0B,GACJA,MAAM,2B,mBAMRA,MAAM,gC,GAMNA,MAAM,iC,GACJA,MAAM,6C,qCAMPC,gCAA0B,KAAvBD,MAAM,cAAY,Y,GAArBO,G,GAEIP,MAAM,wC,qCAQVC,gCAA0B,KAAvBD,MAAM,cAAY,Y,GAArBQ,G,qCAcJP,gCAgBM,OAfJQ,MAAM,6BACNJ,MAAM,KACNK,OAAO,KACPC,KAAK,eACLX,MAAM,aACNY,QAAQ,aANV,CAQEX,gCAGE,QAFAY,YAAU,UACVC,EAAE,yFAEJb,gCAGE,QAFAY,YAAU,UACVC,EAAE,0FAdN,M,GAAAC,G,GAsBLf,MAAM,2B,GACJA,MAAM,wB,GACNA,MAAM,O,GACAA,MAAM,qB,SAGcA,MAAM,W,GAiBhCA,MAAM,e,GACNA,MAAM,6B,GAUNA,MAAM,sC,GACJA,MAAM,8B,SAoBfA,MAAM,mE,uBAENC,gCAA8B,MAA1BD,MAAM,QAAO,YAAQ,M,+BAItB,W,SAMLA,MAAM,wD,uBAKHC,gCAAqC,KAAlCD,MAAM,yBAAuB,Y,+BAAK,W,+BASrC,W,uBAAOC,gCACT,KADYD,MAAM,0BAAwB,Y,oKArLjDgB,gCAyLM,MAzLN,EAyLM,CAxLJC,EACAhB,gCAsLM,MAtLN,EAsLM,CArLJA,gCAWM,MAXN,EAWM,CAVJA,gCASM,MATN,EASM,CARJA,gCAOK,KAPL,EAOK,CANHA,gCAEK,KAFL,EAEK,CADHiB,yBAAoCC,GAAA,CAAvBC,GAAG,KAAG,C,8BAAC,iBAAE,O,QAExBC,QAMNH,yBAAuCI,GAAA,CAA1BC,OAAO,OACpBtB,gCAoJM,MApJN,EAoJM,CAnJJuB,EAmJI,KAjJUC,KAAKC,OAA+B,IAA1B,KAASD,KAAKC,MAAMC,QAD5C,yBAuIAX,gCAUO,OAVP,EAUO,CANLY,EACAV,yBAICC,GAAA,CAHCC,GAAG,oBACHpB,MAAM,mCAFR,C,8BAGG,iBAAO,O,UA9IsC,yBADlDgB,gCAsIO,OAtIP,EAsIO,CAlILf,gCA6EQ,QA7ER,EA6EQ,CA5EN4B,EAQA5B,gCAmEQ,QAnER,EAmEQ,6BAlENe,gCAiEKc,cAAA,KAAAC,wBAjEcC,OAAKN,OAAK,SAAlBO,G,gCAAXjB,gCAiEK,MAjE2BkB,IAAKD,EAAKE,IAA1C,CACElC,gCAYK,KAZL,EAYK,CAXHA,gCAUM,MAVN,EAUM,CATJA,gCAKM,MALN,EAKM,CAJJA,gCAGE,OAFCmC,IAAKH,EAAKI,QAAQC,SAClBC,IAAKN,EAAKI,QAAQG,MAAK,SAF1B,YAKFvC,gCAEI,IAFJ,EAEIwC,6BADCR,EAAKI,QAAQG,OAAK,OAI3BvC,gCAsBK,WArBHA,gCAoBM,MApBN,EAoBM,CAnBJA,gCAkBM,MAlBN,EAkBM,CAjBJA,gCAMS,UALPyC,KAAK,SACL1C,MAAM,kCACL2C,QAAK,mBAAEC,YAAUX,KAHpB,OAOAhC,gCAES,OAFT,EAESwC,6BADPR,EAAKY,KAAG,GAEV5C,gCAMS,UALPyC,KAAK,SACL1C,MAAM,kCACL2C,QAAK,mBAAEC,UAAQX,KAHlB,aAUNhC,gCAEK,WADHA,gCAA8C,UAAAwC,6BAAvCK,WAASC,SAASd,EAAKe,QAAS,KAAE,KAE3C/C,gCAwBK,WAvBHA,gCAsBS,UArBPyC,KAAK,SACL1C,MAAM,kCACL2C,QAAK,mBAAEC,aAAWX,KAHrB,cAzCJ,UAoEJhC,gCAmDM,MAnDN,EAmDM,CAlDJA,gCAqBM,MArBN,EAqBM,CApBJA,gCAmBI,IAnBJ,EAmBI,CAlBFA,gCAEC,QAFD,EAAiC,YACvBwC,6BAAGK,WAASC,SAAQ,KAAMtB,KAAKuB,QAAK,GAEjChB,yCAAbhB,gCAMC,QAND,EAA2C,gBAC7ByB,6BACVK,WAASC,SAAT,KAA8CtB,KAAKuB,MAAQC,SAAQ,KAAMxB,KAAKyB,eAFlF,2CAOAjD,gCAOC,SANED,MAAK,+CAA+DyB,KAAK0B,WAAS,kCAIpF,WACQV,kCAAQW,SAAO,OAI5BnD,gCAUM,MAVN,EAUM,CATJA,gCAQI,IARJ,EAAqC,WAC5BwC,kCACAhB,KAAK0B,UAAgCL,WAASC,SAAkCE,SAAQ,KAAMxB,KAAKyB,aAAW,KAASE,SAAsDN,WAASC,SAASE,SAAQ,KAAMxB,KAAKyB,eAAW,KAQxOjD,gCAgBM,MAhBN,EAgBM,CAfJA,gCAcM,MAdN,EAcM,6BAbJA,gCAKE,SAJAyC,KAAK,OACL1C,MAAM,eACNqD,YAAY,S,uDACEC,KAAIC,KAJpB,iCAIgBD,QAEhBrD,gCAMS,UALPyC,KAAK,SACL1C,MAAM,wDACL2C,QAAK,+BAAEC,aAAS,IAAYU,SAC9B,sBAsCP,KAlBU7B,KAAKC,OAA+B,IAA1B,KAASD,KAAKC,MAAMC,OAD5C,wCACkD,yBADlDX,gCAkBM,MAlBN,EAkBM,CAdJE,yBAICC,GAAA,CAHCC,GAAG,oBACHpB,MAAM,oCAFR,C,8BAGG,iBAAqC,CAArCwD,EAAqC,M,MAExCvD,gCAKS,UAJPD,MAAM,sCACL2C,QAAK,+BAAEC,qBACT,eAGD1B,yBAEeC,GAAA,CAFFC,GAAG,cAAcpB,MAAM,sCAApC,C,8BACG,iBAAO,S,8FAsCH,IACbyD,OAAQ,CAAC,WACTC,WAAY,CACVC,qBAEFC,KALa,WAMX,MAAO,CACLnC,KAAM,GACN2B,QAAS,IACTE,KAAM,GACNO,cAAc,IAGlBC,QAAS,CACPC,QADO,WACG,WACFC,EAAE,UAAOC,wCAAP,eAAqCA,aAArC,SACRC,KAAKC,MAAMC,IAAIJ,GAAKK,MAAK,SAACC,GACpBA,EAAIV,KAAKA,KAAKlC,MAAMC,OAAS,GAC/B4C,aAAaC,WAAW,cAE1B,EAAK/C,KAAL,mBAAiB6C,EAAIV,KAAKA,MAC1B,EAAKnC,KAAKC,MAAV,gBAAsB+C,gBAAcH,EAAIV,KAAKA,KAAKlC,QAClD,EAAKD,KAAK0B,UAAYuB,gBAAYJ,EAAIV,KAAKA,MAC3C,EAAKe,YAAYC,gBAAgB,mBAGrCC,UAbO,SAaG5C,GAAM,WACR+B,EAAE,UAAOC,wCAAP,eAAqCA,aAArC,iBAAsEhC,EAAKE,IAEnF,GAAIF,EAAKY,KAAO,EACdqB,KAAKY,MAAM,CACTC,mBAAmB,EACnBC,KAAM,QACNxC,MAAO,SACPyC,KAAM,gBALV,CASA,IAAMxD,EAAO,CACXyD,WAAYjD,EAAKiD,WACjBrC,MAAOZ,EAAKY,KAEdqB,KAAKC,MACFgB,IAAInB,EAAK,CAAEJ,KAAMnC,IACjB4C,MAAK,SAACC,GACL,EAAKQ,MAAM,CACTM,OAAO,EACPC,SAAU,UACVN,mBAAmB,EACnBO,MAAO,IACPC,kBAAkB,EAClBC,QAAS,SAACJ,GACRA,EAAMK,iBAAiB,aAAc,EAAKX,MAAMY,WAChDN,EAAMK,iBAAiB,aAAc,EAAKX,MAAMa,cAElDX,KAAM,UACNxC,MAAO,aAET,EAAKuB,aAEN6B,OAAM,SAACC,GACN,EAAKf,MAAM,CACTC,mBAAmB,EACnBC,KAAM,QACNxC,MAAO,OACPyC,KAAMY,SAIdC,QAxDO,SAwDC7D,GAAM,WACN+B,EAAE,UAAOC,wCAAP,eAAqCA,aAArC,iBAAsEhC,EAAKE,IAC7EV,EAAO,CACXyD,WAAYjD,EAAKiD,WACjBrC,MAAOZ,EAAKY,KAEdqB,KAAKC,MACFgB,IAAInB,EAAK,CAAEJ,KAAMnC,IACjB4C,MAAK,SAACC,GACL,EAAKQ,MAAM,CACTM,OAAO,EACPC,SAAU,UACVN,mBAAmB,EACnBO,MAAO,IACPC,kBAAkB,EAClBC,QAAS,SAACJ,GACRA,EAAMK,iBAAiB,aAAc,EAAKX,MAAMY,WAChDN,EAAMK,iBAAiB,aAAc,EAAKX,MAAMa,cAElDX,KAAM,UACNxC,MAAO,aAET,EAAKuB,aAEN6B,OAAM,SAACC,GACN,EAAKf,MAAM,CACTC,mBAAmB,EACnBC,KAAM,QACNxC,MAAO,OACPyC,KAAMY,QAIdE,WAzFO,SAyFI9D,GAAM,WACT+B,EAAE,UAAOC,wCAAP,eAAqCA,aAArC,iBAAsEhC,EAAKE,IACnF+B,KAAKC,MACF6B,OAAOhC,GACPK,MAAK,SAACC,GACL,EAAKQ,MAAM,CACTM,OAAO,EACPC,SAAU,UACVN,mBAAmB,EACnBO,MAAO,KACPC,kBAAkB,EAClBC,QAAS,SAACJ,GACRA,EAAMK,iBAAiB,aAAc,EAAKX,MAAMY,WAChDN,EAAMK,iBAAiB,aAAc,EAAKX,MAAMa,cAElDX,KAAM,UACNxC,MAAO,YAET,EAAKuB,UACL,EAAKkC,QAAQC,KAAK,wBAEnBN,OAAM,SAACC,GACN,EAAKf,MAAM,CACTC,mBAAmB,EACnBC,KAAM,QACNxC,MAAO,OACPyC,KAAMY,QAIdM,cAvHO,WAuHS,WACRnC,EAAE,UAAOC,wCAAP,eAAqCA,aAArC,UACRC,KAAKY,MAAM,CACTtC,MAAO,aACP4D,KAAM,UACNpB,KAAM,UACNqB,kBAAkB,EAClBC,mBAAoB,UACpBC,kBAAmB,OACnBC,kBAAmB,QACnBC,iBAAkB,QACjBpC,MAAK,SAACqC,GACHA,EAAOC,cACT,EAAK7B,MAAM,SAAU,mBAAoB,WACzC,EAAKX,MACF6B,OAAOhC,GACPK,MAAK,SAACC,GACLC,aAAaC,WAAW,cACxB,EAAKT,UACL,EAAKkC,QAAQC,KAAK,wBAEnBN,OAAM,SAACC,GACN,EAAKf,MAAM,CACTC,mBAAmB,EACnBC,KAAM,QACNxC,MAAO,OACPyC,KAAMY,YAMlBe,UAvJO,SAuJGC,EAAOvD,GAAM,WACfwD,EAAE,UAAO7C,wCAAP,eAAqCA,aAArC,WACF8C,EAAa,CACjBzD,KAAMA,GAGRY,KAAKC,MAAM6C,KAAKF,EAAK,CAAElD,KAAMmD,IAAc1C,MAAK,SAACC,GAC3CA,EAAIV,KAAKqD,SACX,EAAKxF,KAAKyB,YAAcoB,EAAIV,KAAKA,KAAKV,YACtC,EAAKW,cAAe,EACpBqD,gBAAiB,aAAc5D,GAC3BuD,GACF,EAAK/B,MAAM,CACTM,OAAO,EACPC,SAAU,UACVN,mBAAmB,EACnBO,MAAO,KACPC,kBAAkB,EAClBC,QAAS,SAACJ,GACRA,EAAMK,iBAAiB,aAAc,EAAKX,MAAMY,WAChDN,EAAMK,iBAAiB,aAAc,EAAKX,MAAMa,cAElDX,KAAM,UACNxC,MAAO,cAIX,EAAKsC,MAAM,CACTM,OAAO,EACPC,SAAU,UACVN,mBAAmB,EACnBO,MAAO,KACPC,kBAAkB,EAClBC,QAAS,SAACJ,GACRA,EAAMK,iBAAiB,aAAc,EAAKX,MAAMY,WAChDN,EAAMK,iBAAiB,aAAc,EAAKX,MAAMa,cAElDX,KAAM,QACNxC,MAAO8B,EAAIV,KAAKuD,cAKxBxC,YAlMO,SAkMKyC,GACS,OAAfA,IACFlD,KAAKL,cAAe,EACpBK,KAAKZ,KAAO8D,EACZlD,KAAK0C,WAAU,EAAO1C,KAAKZ,SAIjC+D,QAvNa,WAwNXnD,KAAKH,WAEPuD,QA1Na,WA0NH,WACRpD,KAAK+B,QAAQsB,GAAG,eAAe,WAC7B,EAAKxD,e,oCCjbX,MAAMyD,GAA2B,KAAgB,GAAQ,CAAC,CAAC,SAASC,IAAQ,CAAC,YAAY,qBAE1E,iB,oCCTf","file":"js/chunk-373f019e.8be3a208.js","sourcesContent":["<template>\n  <div class=\"container\">\n    <div class=\"mx-5 my-3\"></div>\n    <div class=\"row justify-content-center\">\n      <div class=\"col-11 mx-5 my-3\">\n        <nav style=\"--bs-breadcrumb-divider: '>'\" aria-label=\"breadcrumb\">\n          <ol class=\"breadcrumb d-flex justify-content-end\">\n            <li class=\"breadcrumb-item\">\n              <router-link to=\"/\">首頁</router-link>\n            </li>\n            <li class=\"breadcrumb-item active colorBlue\" aria-current=\"page\">\n              購物車\n            </li>\n          </ol>\n        </nav>\n      </div>\n      <shopProcess status=\"確認\"></shopProcess>\n      <div class=\"col-lg-10 col-md-12 col-11 my-5\">\n        <h1 class=\"fw-bold text-center mb-4\">購物車</h1>\n        <main\n          v-if=\"!this.cart.carts || this.cart.carts.length !== 0\"\n          class=\"mx-auto bg-white px-md-5 px-3 py-5 text-center rounded-3 shadow\"\n        >\n          <table class=\"table position-relative\">\n            <thead>\n              <tr>\n                <td width=\"40%\" scope=\"col\" class=\"py-3\">商品資訊</td>\n                <td width=\"35%\" scope=\"col\" class=\"py-3\">數量</td>\n                <td width=\"20%\" scope=\"col\" class=\"py-3\">金額</td>\n                <td width=\"5%\" scope=\"col\" class=\"py-3\"></td>\n              </tr>\n            </thead>\n            <tbody class=\"align-middle\">\n              <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                <td class=\"text-start\">\n                  <div class=\"row align-items-center\">\n                    <div class=\"col-4 d-md-block d-none\">\n                      <img\n                        :src=\"item.product.imageUrl\"\n                        :alt=\"item.product.title + '的商品照片'\"\n                      />\n                    </div>\n                    <p class=\"col-md-8 m-0 px-md-2 fw-bold\">\n                      {{ item.product.title }}\n                    </p>\n                  </div>\n                </td>\n                <td>\n                  <div class=\"d-flex justify-content-center\">\n                    <div class=\"input-group d-flex justify-content-center\">\n                      <button\n                        type=\"button\"\n                        class=\"btn px-0 px-sm-1 px-md-2 border\"\n                        @click=\"minusCart(item)\"\n                      >\n                        <i class=\"bi bi-dash\"></i>\n                      </button>\n                      <span class=\"form-control text-center px-0 p-md-1\">{{\n                        item.qty\n                      }}</span>\n                      <button\n                        type=\"button\"\n                        class=\"btn px-0 px-sm-1 px-md-2 border\"\n                        @click=\"addCart(item)\"\n                      >\n                        <i class=\"bi bi-plus\"></i>\n                      </button>\n                    </div>\n                  </div>\n                </td>\n                <td>\n                  <h5>{{ $filters.currency(item.total) }} 元</h5>\n                </td>\n                <td>\n                  <button\n                    type=\"button\"\n                    class=\"btn-red bg-transparent border-0\"\n                    @click=\"deleteCart(item)\"\n                  >\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"25\"\n                      height=\"25\"\n                      fill=\"currentColor\"\n                      class=\"bi bi-x-lg\"\n                      viewBox=\"0 0 16 16\"\n                    >\n                      <path\n                        fill-rule=\"evenodd\"\n                        d=\"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z\"\n                      />\n                      <path\n                        fill-rule=\"evenodd\"\n                        d=\"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z\"\n                      />\n                    </svg>\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <div class=\"row justify-content-end\">\n            <div class=\"col-12 text-end mb-1\">\n              <p class=\"m-0\">\n                <small class=\"d-block text-gray\">\n                  商品金額NT ${{ $filters.currency(this.cart.total) }}</small\n                >\n                <small v-if=\"is_UseCoupon\" class=\"d-block\">\n                  - 使用優惠折扣NT ${{\n                    $filters.currency(\n                      this.cart.total - parseInt(this.cart.final_total)\n                    )\n                  }}</small\n                >\n                <small\n                  :class=\"[\n                    ['d-block'],\n                    !this.cart.isFreight && 'text-decoration-line-through'\n                  ]\"\n                >\n                  + 運費NT {{ this.freight }}</small\n                >\n              </p>\n            </div>\n            <div class=\"col-12 mb-3\">\n              <p class=\"fs-5 text-end text-danger\">\n                總金額NT ${{\n                  this.cart.isFreight\n                    ? $filters.currency(\n                        parseInt(this.cart.final_total) + this.freight\n                      )\n                    : $filters.currency(parseInt(this.cart.final_total))\n                }}\n              </p>\n            </div>\n            <div class=\"col-md-10 col-11 col-md-6 col-lg-5\">\n              <div class=\"input-group input-group-sm\">\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  placeholder=\"請輸入折扣碼\"\n                  v-model=\"this.code\"\n                />\n                <button\n                  type=\"button\"\n                  class=\"btn btn-discount btn-outline-success input-group-text\"\n                  @click=\"addCoupon(true, this.code)\"\n                >\n                  套用優惠卷\n                </button>\n              </div>\n            </div>\n          </div>\n        </main>\n        <main\n          v-else\n          class=\"mx-auto bg-white px-md-5 px-2 py-5 text-center rounded-3 shadow\"\n        >\n          <h3 class=\"mb-3\">購物車內沒有商品</h3>\n          <router-link\n            to=\"/User/ProductList\"\n            class=\"btn btn-custom-Orange px-5 py-1\"\n            >前 往 購 物</router-link\n          >\n        </main>\n      </div>\n      <div\n        v-if=\"!this.cart.carts || this.cart.carts.length !== 0\"\n        class=\"col-md-10 col-11 d-flex justify-content-between mb-5\"\n      >\n        <router-link\n          to=\"/User/ProductList\"\n          class=\"btn btn-custom-Blue px-md-4 py-2\"\n          ><i class=\"bi bi-caret-left me-1\"></i>繼 續 購 物</router-link\n        >\n        <button\n          class=\"btn btn-outline-danger px-md-4 py-2\"\n          @click=\"deleteAllCart()\"\n        >\n          清 空 購 物 車\n        </button>\n        <router-link to=\"/User/Order\" class=\"btn btn-custom-Orange px-md-4 py-2\"\n          >填 寫 訂 單<i class=\"bi bi-caret-right ms-1\"></i\n        ></router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.btn {\n  font-weight: 700;\n  line-height: 1.7;\n}\n\n@media screen and (max-width: 414px) {\n  .btn {\n    padding: 0.5rem 0.2rem;\n  }\n}\n\n/* 表格內容 */\nmain {\n  max-width: 900px;\n}\n\n.input-group span {\n  max-width: 80px;\n  font-size: 1rem;\n  border-width: 1px 0;\n  border-style: solid;\n  border-color: #ced4da;\n}\n</style>\n\n<script>\nimport shopProcess from '../components/ShopProcess.vue';\nimport { filterFreight, checkFrieht } from '@/methods/order';\nimport { savaLocalStorage, getLocalStorage } from '@/methods/localStorage';\n\nexport default {\n  inject: ['emitter'],\n  components: {\n    shopProcess\n  },\n  data() {\n    return {\n      cart: {},\n      freight: 300,\n      code: '',\n      is_UseCoupon: false\n    };\n  },\n  methods: {\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(url).then((res) => {\n        if (res.data.data.carts.length < 1) {\n          localStorage.removeItem('CouponCode');\n        }\n        this.cart = { ...res.data.data };\n        this.cart.carts = [...filterFreight(res.data.data.carts)];\n        this.cart.isFreight = checkFrieht(res.data.data);\n        this.checkCoupon(getLocalStorage('CouponCode'));\n      });\n    },\n    minusCart(item) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n\n      if (item.qty <= 1) {\n        this.$swal({\n          showConfirmButton: true,\n          icon: 'error',\n          title: '數字型別錯誤',\n          Text: '請輸入數字唷!'\n        });\n        return;\n      }\n      const cart = {\n        product_id: item.product_id,\n        qty: --item.qty\n      };\n      this.$http\n        .put(url, { data: cart })\n        .then((res) => {\n          this.$swal({\n            toast: true,\n            position: 'top-end',\n            showConfirmButton: false,\n            timer: 1000,\n            timerProgressBar: true,\n            didOpen: (toast) => {\n              toast.addEventListener('mouseenter', this.$swal.stopTimer);\n              toast.addEventListener('mouseleave', this.$swal.resumeTimer);\n            },\n            icon: 'success',\n            title: '更新購物車成功!'\n          });\n          this.getCart();\n        })\n        .catch((err) => {\n          this.$swal({\n            showConfirmButton: true,\n            icon: 'error',\n            title: '更新失敗',\n            Text: err\n          });\n        });\n    },\n    addCart(item) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      const cart = {\n        product_id: item.product_id,\n        qty: ++item.qty\n      };\n      this.$http\n        .put(url, { data: cart })\n        .then((res) => {\n          this.$swal({\n            toast: true,\n            position: 'top-end',\n            showConfirmButton: false,\n            timer: 1000,\n            timerProgressBar: true,\n            didOpen: (toast) => {\n              toast.addEventListener('mouseenter', this.$swal.stopTimer);\n              toast.addEventListener('mouseleave', this.$swal.resumeTimer);\n            },\n            icon: 'success',\n            title: '更新購物車成功!'\n          });\n          this.getCart();\n        })\n        .catch((err) => {\n          this.$swal({\n            showConfirmButton: true,\n            icon: 'error',\n            title: '更新失敗',\n            Text: err\n          });\n        });\n    },\n    deleteCart(item) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      this.$http\n        .delete(url)\n        .then((res) => {\n          this.$swal({\n            toast: true,\n            position: 'top-end',\n            showConfirmButton: false,\n            timer: 1500,\n            timerProgressBar: true,\n            didOpen: (toast) => {\n              toast.addEventListener('mouseenter', this.$swal.stopTimer);\n              toast.addEventListener('mouseleave', this.$swal.resumeTimer);\n            },\n            icon: 'success',\n            title: '已經移出購物車'\n          });\n          this.getCart();\n          this.emitter.emit('update-cartNumber');\n        })\n        .catch((err) => {\n          this.$swal({\n            showConfirmButton: true,\n            icon: 'error',\n            title: '清空失敗',\n            Text: err\n          });\n        });\n    },\n    deleteAllCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`;\n      this.$swal({\n        title: '確定刪除所有商品嗎?',\n        text: '你將清空購物車',\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: '我想清楚了',\n        cancelButtonText: '再想想'\n      }).then((result) => {\n        if (result.isConfirmed) {\n          this.$swal('已經清空囉!', '你將到宇宙深處才能找到他們...', 'success');\n          this.$http\n            .delete(url)\n            .then((res) => {\n              localStorage.removeItem('CouponCode');\n              this.getCart();\n              this.emitter.emit('update-cartNumber');\n            })\n            .catch((err) => {\n              this.$swal({\n                showConfirmButton: true,\n                icon: 'error',\n                title: '清空失敗',\n                Text: err\n              });\n            });\n        }\n      });\n    },\n    addCoupon(isAdd, code) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const tempCoupon = {\n        code: code\n      };\n\n      this.$http.post(api, { data: tempCoupon }).then((res) => {\n        if (res.data.success) {\n          this.cart.final_total = res.data.data.final_total;\n          this.is_UseCoupon = true;\n          savaLocalStorage('CouponCode', code);\n          if (isAdd) {\n            this.$swal({\n              toast: true,\n              position: 'top-end',\n              showConfirmButton: false,\n              timer: 1500,\n              timerProgressBar: true,\n              didOpen: (toast) => {\n                toast.addEventListener('mouseenter', this.$swal.stopTimer);\n                toast.addEventListener('mouseleave', this.$swal.resumeTimer);\n              },\n              icon: 'success',\n              title: '套用優惠卷成功!'\n            });\n          }\n        } else {\n          this.$swal({\n            toast: true,\n            position: 'top-end',\n            showConfirmButton: false,\n            timer: 1500,\n            timerProgressBar: true,\n            didOpen: (toast) => {\n              toast.addEventListener('mouseenter', this.$swal.stopTimer);\n              toast.addEventListener('mouseleave', this.$swal.resumeTimer);\n            },\n            icon: 'error',\n            title: res.data.message\n          });\n        }\n      });\n    },\n    checkCoupon(CouponCode) {\n      if (CouponCode !== null) {\n        this.is_UseCoupon = true;\n        this.code = CouponCode;\n        this.addCoupon(false, this.code);\n      }\n    }\n  },\n  created() {\n    this.getCart();\n  },\n  mounted() {\n    this.emitter.on('update-cart', () => {\n      this.getCart();\n    });\n  }\n};\n</script>\n","import { render } from \"./UserCart.vue?vue&type=template&id=791f4f00&scoped=true\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport \"./UserCart.vue?vue&type=style&index=0&id=791f4f00&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/cofcat/coffeeShop/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-791f4f00\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UserCart.vue?vue&type=style&index=0&id=791f4f00&scoped=true&lang=css\""],"sourceRoot":""}