{"version":3,"sources":["webpack:///./src/views/UserCart.vue?a6c6","webpack:///./src/views/UserCart.vue","webpack:///./src/views/UserCart.vue?52e4"],"names":["class","_createElementVNode","width","scope","_hoisted_18","_hoisted_22","xmlns","height","fill","viewBox","fill-rule","d","_hoisted_25","_createVNode","_component_LoadingComponent","LoadingState","$data","_hoisted_2","_component_Breadcrumb","Breadcrumb","_component_ShopProcess","status","_hoisted_5","cart","carts","length","_createElementBlock","_hoisted_37","_component_router_link","to","_hoisted_8","_Fragment","_renderList","item","key","id","src","product","imageUrl","alt","title","onClick","$options","_toDisplayString","type","qty","_ctx","currency","total","parseInt","final_total","isFreight","freight","placeholder","code","$event","_hoisted_40","inject","components","ShopProcess","LoadingComponent","data","is_UseCoupon","isLoading","link","methods","getCart","url","process","this","$http","get","then","res","success","localStorage","removeItem","filterFreight","checkFrieht","checkCoupon","getLocalStorage","minusCart","$swal","showConfirmButton","icon","Text","product_id","put","toast","position","timer","timerProgressBar","didOpen","addEventListener","stopTimer","resumeTimer","catch","err","addCart","deleteCart","delete","emitter","emit","deleteAllCart","text","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","result","isConfirmed","addCoupon","isAdd","api","tempCoupon","post","savaLocalStorage","message","CouponCode","getProductId","$router","push","created","mounted","on","__exports__","render"],"mappings":"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","file":"js/chunk-17017da8.78858ae9.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./UserCart.vue?vue&type=style&index=0&id=ae099a86&scoped=true&lang=css\"","<template>\n  <LoadingComponent :LoadingState='isLoading' />\n  <div class=\"container\">\n    <div class=\"mx-5 my-3\"></div>\n    <div class=\"row justify-content-center\">\n      <Breadcrumb :Breadcrumb=\"Breadcrumb\" />\n      <ShopProcess status=\"確認\" />\n      <div class=\"col-lg-10 col-md-12 col-11 my-5\">\n        <h1 class=\"fw-bold text-center mb-4\">購物車</h1>\n        <main\n          v-if=\"!this.cart.carts || this.cart.carts.length !== 0\"\n          class=\"mx-auto bg-white px-md-5 px-3 py-5 text-center rounded-3 shadow\"\n        >\n          <table class=\"table position-relative\">\n            <thead>\n              <tr>\n                <td width=\"40%\" scope=\"col\" class=\"py-3\">商品資訊</td>\n                <td width=\"35%\" scope=\"col\" class=\"py-3\">數量</td>\n                <td width=\"20%\" scope=\"col\" class=\"py-3\">金額</td>\n                <td width=\"5%\" scope=\"col\" class=\"py-3\"></td>\n              </tr>\n            </thead>\n            <tbody class=\"align-middle\">\n              <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                <td class=\"text-start\">\n                  <div class=\"row align-items-center\">\n                    <div class=\"col-4 d-md-block d-none\">\n                      <img\n                        :src=\"item.product.imageUrl\"\n                        :alt=\"item.product.title + '的商品照片'\"\n                        @click=\"getProductId(item.product.id)\"\n                      />\n                    </div>\n                    <p class=\"col-md-8 m-0 px-md-2 fw-bold\">\n                      {{ item.product.title }}\n                    </p>\n                  </div>\n                </td>\n                <td>\n                  <div class=\"d-flex justify-content-center\">\n                    <div class=\"input-group d-flex justify-content-center\">\n                      <button\n                        type=\"button\"\n                        class=\"btn px-0 px-sm-1 px-md-2 border\"\n                        @click=\"minusCart(item)\"\n                      >\n                        <i class=\"bi bi-dash\"></i>\n                      </button>\n                      <span class=\"form-control text-center px-0 p-md-1\">{{\n                        item.qty\n                      }}</span>\n                      <button\n                        type=\"button\"\n                        class=\"btn px-0 px-sm-1 px-md-2 border\"\n                        @click=\"addCart(item)\"\n                      >\n                        <i class=\"bi bi-plus\"></i>\n                      </button>\n                    </div>\n                  </div>\n                </td>\n                <td>\n                  <h5>{{ $filters.currency(item.total) }} 元</h5>\n                </td>\n                <td>\n                  <button\n                    type=\"button\"\n                    class=\"btn-red bg-transparent border-0\"\n                    @click=\"deleteCart(item)\"\n                  >\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      width=\"25\"\n                      height=\"25\"\n                      fill=\"currentColor\"\n                      class=\"bi bi-x-lg\"\n                      viewBox=\"0 0 16 16\"\n                    >\n                      <path\n                        fill-rule=\"evenodd\"\n                        d=\"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z\"\n                      />\n                      <path\n                        fill-rule=\"evenodd\"\n                        d=\"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z\"\n                      />\n                    </svg>\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <div class=\"row justify-content-end\">\n            <div class=\"col-12 text-end mb-1\">\n              <p class=\"m-0\">\n                <small class=\"d-block text-gray\">\n                  商品金額NT ${{ $filters.currency(this.cart.total) }}</small\n                >\n                <small v-if=\"is_UseCoupon\" class=\"d-block\">\n                  - 使用優惠折扣NT ${{\n                    $filters.currency(\n                      this.cart.total - parseInt(this.cart.final_total)\n                    )\n                  }}</small\n                >\n                <small\n                  :class=\"[\n                    ['d-block'],\n                    !this.cart.isFreight && 'text-decoration-line-through'\n                  ]\"\n                >\n                  + 運費NT {{ this.freight }}</small\n                >\n              </p>\n            </div>\n            <div class=\"col-12 mb-3\">\n              <p class=\"fs-5 text-end text-danger\">\n                總金額NT ${{\n                  this.cart.isFreight\n                    ? $filters.currency(\n                        parseInt(this.cart.final_total) + this.freight\n                      )\n                    : $filters.currency(parseInt(this.cart.final_total))\n                }}\n              </p>\n            </div>\n            <div class=\"col-md-10 col-11 col-md-6 col-lg-5\">\n              <div class=\"input-group input-group-sm\">\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  placeholder=\"請輸入折扣碼\"\n                  v-model=\"this.code\"\n                />\n                <button\n                  type=\"button\"\n                  class=\"btn btn-discount btn-outline-success input-group-text\"\n                  @click=\"addCoupon(true, this.code)\"\n                >\n                  套用優惠卷\n                </button>\n              </div>\n            </div>\n          </div>\n        </main>\n        <main\n          v-else\n          class=\"mx-auto bg-white px-md-5 px-2 py-5 text-center rounded-3 shadow\"\n        >\n          <h3 class=\"mb-3\">購物車內沒有商品</h3>\n          <router-link\n            to=\"/User/ProductList\"\n            class=\"btn btn-custom-Brown px-5 py-1\"\n            >前 往 購 物</router-link\n          >\n        </main>\n      </div>\n      <div\n        v-if=\"!this.cart.carts || this.cart.carts.length !== 0\"\n        class=\"col-md-10 col-11 d-flex justify-content-between mb-5\"\n      >\n        <router-link\n          to=\"/User/ProductList\"\n          class=\"btn btn-custom-Blue px-md-4 py-2\"\n          ><i class=\"bi bi-caret-left me-1\"></i>繼 續 購 物</router-link\n        >\n        <button\n          type=\"button\"\n          class=\"btn btn-outline-danger px-md-4 py-2\"\n          @click=\"deleteAllCart()\"\n        >\n          清 空 購 物 車\n        </button>\n        <router-link to=\"/User/Order\" class=\"btn btn-custom-Brown px-md-4 py-2\"\n          >填 寫 訂 單<i class=\"bi bi-caret-right ms-1\"></i\n        ></router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ShopProcess from '../components/ShopProcess.vue';\nimport Breadcrumb from '../components/Breadcrumb.vue';\nimport LoadingComponent from '../components/LoadingComponent.vue';\nimport { filterFreight, checkFrieht } from '@/methods/order';\nimport { savaLocalStorage, getLocalStorage } from '@/methods/localStorage';\n\nexport default {\n  inject: ['emitter'],\n  components: {\n    ShopProcess,\n    Breadcrumb,\n    LoadingComponent\n  },\n  data() {\n    return {\n      cart: {},\n      freight: 300,\n      code: '',\n      is_UseCoupon: false,\n      isLoading: false,\n      Breadcrumb: [\n        {\n          title: '購物車',\n          link: '/User/cart'\n        }\n      ]\n    };\n  },\n  methods: {\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(url).then((res) => {\n        if (res.data.success) {\n          this.isLoading = false;\n          if (res.data.data.carts.length < 1) {\n            localStorage.removeItem('CouponCode');\n          }\n          this.cart = { ...res.data.data };\n          this.cart.carts = [...filterFreight(res.data.data.carts)];\n          this.cart.isFreight = checkFrieht(res.data.data);\n          this.checkCoupon(getLocalStorage('CouponCode'));\n        }\n      });\n    },\n    minusCart(item) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      this.isLoading = true;\n\n      if (item.qty <= 1) {\n        this.$swal({\n          showConfirmButton: true,\n          icon: 'error',\n          title: '數字型別錯誤',\n          Text: '請輸入數字唷!'\n        });\n        return;\n      }\n      const cart = {\n        product_id: item.product_id,\n        qty: --item.qty\n      };\n      this.$http\n        .put(url, { data: cart })\n        .then((res) => {\n          if (res.data.success) {\n            this.isLoading = false;\n            this.$swal({\n              toast: true,\n              position: 'top-end',\n              showConfirmButton: false,\n              timer: 1000,\n              timerProgressBar: true,\n              didOpen: (toast) => {\n                toast.addEventListener('mouseenter', this.$swal.stopTimer);\n                toast.addEventListener('mouseleave', this.$swal.resumeTimer);\n              },\n              icon: 'success',\n              title: '更新購物車成功!'\n            });\n            this.getCart();\n          }\n        })\n        .catch((err) => {\n          this.$swal({\n            showConfirmButton: true,\n            icon: 'error',\n            title: '更新失敗',\n            Text: err\n          });\n        });\n    },\n    addCart(item) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      this.isLoading = true;\n      const cart = {\n        product_id: item.product_id,\n        qty: ++item.qty\n      };\n      this.$http\n        .put(url, { data: cart })\n        .then((res) => {\n          if (res.data.success) {\n            this.$swal({\n              toast: true,\n              position: 'top-end',\n              showConfirmButton: false,\n              timer: 1000,\n              timerProgressBar: true,\n              didOpen: (toast) => {\n                toast.addEventListener('mouseenter', this.$swal.stopTimer);\n                toast.addEventListener('mouseleave', this.$swal.resumeTimer);\n              },\n              icon: 'success',\n              title: '更新購物車成功!'\n            });\n            this.getCart();\n          }\n        })\n        .catch((err) => {\n          this.$swal({\n            showConfirmButton: true,\n            icon: 'error',\n            title: '更新失敗',\n            Text: err\n          });\n        });\n    },\n    deleteCart(item) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      this.isLoading = true;\n      this.$http\n        .delete(url)\n        .then((res) => {\n          if (res.data.success) {\n            this.isLoading = false;\n            this.$swal({\n              toast: true,\n              position: 'top-end',\n              showConfirmButton: false,\n              timer: 1500,\n              timerProgressBar: true,\n              didOpen: (toast) => {\n                toast.addEventListener('mouseenter', this.$swal.stopTimer);\n                toast.addEventListener('mouseleave', this.$swal.resumeTimer);\n              },\n              icon: 'success',\n              title: '已經移出購物車'\n            });\n            this.getCart();\n            this.emitter.emit('update-cartNumber');\n          }\n        })\n        .catch((err) => {\n          this.$swal({\n            showConfirmButton: true,\n            icon: 'error',\n            title: '清空失敗',\n            Text: err\n          });\n        });\n    },\n    deleteAllCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`;\n      this.$swal({\n        title: '確定刪除所有商品嗎?',\n        text: '你將清空購物車',\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: '我想清楚了',\n        cancelButtonText: '再想想'\n      }).then((result) => {\n        if (result.isConfirmed) {\n          this.$swal('已經清空囉!', '你將到宇宙深處才能找到他們...', 'success');\n          this.$http\n            .delete(url)\n            .then((res) => {\n              if (res.data.success) {\n                localStorage.removeItem('CouponCode');\n                this.getCart();\n                this.emitter.emit('update-cartNumber');\n              }\n            })\n            .catch((err) => {\n              this.$swal({\n                showConfirmButton: true,\n                icon: 'error',\n                title: '清空失敗',\n                Text: err\n              });\n            });\n        }\n      });\n    },\n    addCoupon(isAdd, code) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      this.isLoading = true;\n      const tempCoupon = {\n        code: code\n      };\n\n      this.$http.post(api, { data: tempCoupon }).then((res) => {\n        if (res.data.success) {\n          this.isLoading = false;\n          this.cart.final_total = res.data.data.final_total;\n          this.is_UseCoupon = true;\n          savaLocalStorage('CouponCode', code);\n          if (isAdd) {\n            this.$swal({\n              toast: true,\n              position: 'top-end',\n              showConfirmButton: false,\n              timer: 1500,\n              timerProgressBar: true,\n              didOpen: (toast) => {\n                toast.addEventListener('mouseenter', this.$swal.stopTimer);\n                toast.addEventListener('mouseleave', this.$swal.resumeTimer);\n              },\n              icon: 'success',\n              title: '套用優惠卷成功!'\n            });\n          }\n        } else {\n          this.$swal({\n            toast: true,\n            position: 'top-end',\n            showConfirmButton: false,\n            timer: 1500,\n            timerProgressBar: true,\n            didOpen: (toast) => {\n              toast.addEventListener('mouseenter', this.$swal.stopTimer);\n              toast.addEventListener('mouseleave', this.$swal.resumeTimer);\n            },\n            icon: 'error',\n            title: res.data.message\n          });\n        }\n      });\n    },\n    checkCoupon(CouponCode) {\n      if (CouponCode !== null) {\n        this.is_UseCoupon = true;\n        this.code = CouponCode;\n        this.addCoupon(false, this.code);\n      }\n    },\n    getProductId(id) {\n      this.$router.push(`/User/product/${id}`);\n    }\n  },\n  created() {\n    this.getCart();\n  },\n  mounted() {\n    this.emitter.on('update-cart', () => {\n      this.getCart();\n    });\n  }\n};\n</script>\n\n<style scoped>\nimg {\n  cursor: pointer;\n}\n\n@media screen and (max-width: 414px) {\n  .btn {\n    padding: 0.5rem 0.2rem;\n  }\n}\n\n/* 表格內容 */\nmain {\n  max-width: 900px;\n}\n\n.input-group span {\n  max-width: 80px;\n  font-size: 1rem;\n  border-width: 1px 0;\n  border-style: solid;\n  border-color: #ced4da;\n}\n</style>\n","import { render } from \"./UserCart.vue?vue&type=template&id=ae099a86&scoped=true\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport \"./UserCart.vue?vue&type=style&index=0&id=ae099a86&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/cofcat/coffeeShop/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ae099a86\"]])\n\nexport default __exports__"],"sourceRoot":""}