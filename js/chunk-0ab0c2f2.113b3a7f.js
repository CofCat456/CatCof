(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ab0c2f2"],{"4af2":function(e,t,o){"use strict";o.r(t);var n=o("7a23"),c=Object(n["createElementVNode"])("div",{class:"loadingio-spinner-ripple-3xq5u6jldre"},[Object(n["createElementVNode"])("div",{class:"ldio-dwik2dnj2i"},[Object(n["createElementVNode"])("div"),Object(n["createElementVNode"])("div")])],-1),a={class:"text-end mt-3"},l={class:"table mt-4"},d=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",{width:"200"},"名稱"),Object(n["createElementVNode"])("th",{width:"300"},"折扣百分比"),Object(n["createElementVNode"])("th",{width:"250"},"到期日"),Object(n["createElementVNode"])("th",{width:"250"},"是否啟用"),Object(n["createElementVNode"])("th",{width:"300"},"編輯")])],-1),i={key:0,class:"text-success"},r={key:1,class:"text-muted"},s={class:"btn-group"},u=["onClick"],p=["onClick"];function b(e,t,o,b,m,j){var O=Object(n["resolveComponent"])("ToastMessage"),h=Object(n["resolveComponent"])("Loading"),f=Object(n["resolveComponent"])("Pagination"),E=Object(n["resolveComponent"])("CouponModal"),v=Object(n["resolveComponent"])("DeleteModel");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(O),Object(n["createVNode"])(h,{active:m.isLoading},{default:Object(n["withCtx"])((function(){return[c]})),_:1},8,["active"]),Object(n["createElementVNode"])("div",a,[Object(n["createElementVNode"])("button",{class:"btn btn-primary",type:"button",onClick:t[0]||(t[0]=function(e){return j.openModel(!0)})}," 增加一個優惠卷 ")]),Object(n["createElementVNode"])("table",l,[d,Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(m.coupons,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:e.id},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.title),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.percent)+"%",1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.due_date),1),Object(n["createElementVNode"])("td",null,[e.is_enabled?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",i,"啟用")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",r,"未啟用"))]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(t){return j.openModel(!1,e)}}," 編輯 ",8,u),Object(n["createElementVNode"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return j.openDeleteModel(e)}}," 刪除 ",8,p)])])])})),128))])]),Object(n["createVNode"])(f,{pages:m.pagination,onEmitAdpages:j.getCoupon,onEmitAdPrev:j.getCoupon,onEmitAdNext:j.getCoupon},null,8,["pages","onEmitAdpages","onEmitAdPrev","onEmitAdNext"]),Object(n["createVNode"])(E,{ref:"CouponModal",Coupon:m.tempCoupon,onUpdateCoupon:j.updateCoupon},null,8,["Coupon","onUpdateCoupon"]),Object(n["createVNode"])(v,{ref:"deleteModal",item:m.tempCoupon.title,id:m.tempCoupon.id,onDelItem:j.DeleteCoupon},null,8,["item","id","onDelItem"])],64)}var m=o("5530"),j=(o("99af"),o("d3b7"),o("159b"),function(e){return Object(n["pushScopeId"])("data-v-b03441ce"),e=e(),Object(n["popScopeId"])(),e}),O={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},h={class:"modal-dialog modal-xl",role:"document"},f={class:"modal-content border-0"},E=j((function(){return Object(n["createElementVNode"])("div",{class:"modal-header bg-dark text-white"},[Object(n["createElementVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(n["createElementVNode"])("span",null,"編輯優惠卷")]),Object(n["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)})),v={class:"modal-body"},N={class:"row"},V={class:"col-sm-12 px-3"},C={class:"mb-3"},g=j((function(){return Object(n["createElementVNode"])("label",{for:"title",class:"form-label"},"名稱",-1)})),x={class:"row gx-3"},M=j((function(){return Object(n["createElementVNode"])("h5",{class:"px-2"},"優惠卷資訊",-1)})),k={class:"mt-2 mb-3 col-md-6 px-2"},w=j((function(){return Object(n["createElementVNode"])("label",{for:"percent",class:"form-label"},"折價比例",-1)})),y={class:"mt-2 mb-3 col-md-6 px-2"},D=j((function(){return Object(n["createElementVNode"])("label",{for:"due_date",class:"form-label"},"到期日",-1)})),_={class:"row gx-3"},B={class:"mb-3 col"},$=j((function(){return Object(n["createElementVNode"])("label",{for:"code",class:"form-label"},"優惠碼",-1)})),L={class:"mb-3"},S={class:"form-check"},U=j((function(){return Object(n["createElementVNode"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1)})),T={class:"modal-footer"},A=j((function(){return Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1)}));function I(e,t,o,c,a,l){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",O,[Object(n["createElementVNode"])("div",h,[Object(n["createElementVNode"])("div",f,[E,Object(n["createElementVNode"])("div",v,[Object(n["createElementVNode"])("div",N,[Object(n["createElementVNode"])("div",V,[Object(n["createElementVNode"])("div",C,[g,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",class:"form-control",id:"title",placeholder:"優惠卷名稱","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.tempCoupon.title=e})},null,512),[[n["vModelText"],a.tempCoupon.title]])]),Object(n["createElementVNode"])("div",x,[M,Object(n["createElementVNode"])("div",k,[w,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"number",class:"form-control",id:"percent",placeholder:"百分比","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.tempCoupon.percent=e})},null,512),[[n["vModelText"],a.tempCoupon.percent]])]),Object(n["createElementVNode"])("div",y,[D,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"number",class:"form-control",id:"due_date",placeholder:"請使用 Unix Timestamp 格式","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.tempCoupon.due_date=e})},null,512),[[n["vModelText"],a.tempCoupon.due_date]])])]),Object(n["createElementVNode"])("div",_,[Object(n["createElementVNode"])("div",B,[$,Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",class:"form-control",id:"code",placeholder:"Code","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.tempCoupon.code=e})},null,512),[[n["vModelText"],a.tempCoupon.code]])])])]),Object(n["createElementVNode"])("div",L,[Object(n["createElementVNode"])("div",S,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.tempCoupon.is_enabled=e})},null,512),[[n["vModelCheckbox"],a.tempCoupon.is_enabled]]),U])])])]),Object(n["createElementVNode"])("div",T,[A,Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[5]||(t[5]=function(t){return e.$emit("update-coupon",a.tempCoupon)})}," 確認 ")])])])],512)}var P=o("db44"),F={props:{Coupon:{type:Object,default:function(){return{}}}},data:function(){return{modal:{},tempCoupon:{}}},watch:{Coupon:function(){this.tempCoupon=this.Coupon}},mixins:[P["a"]]},J=(o("ccd6"),o("d959")),q=o.n(J);const Y=q()(F,[["render",I],["__scopeId","data-v-b03441ce"]]);var z=Y,G=o("139f"),H=o("f367"),K=o("1799"),Q=o("9bb9"),R={components:{CouponModal:z,DeleteModel:G["a"],ToastMessage:H["a"],Pagination:K["a"]},inject:["emitter"],data:function(){return{coupons:[],pagination:{},isLoading:!1,tempCoupon:{},isNew:!1}},methods:{openModel:function(e,t){this.tempCoupon=e?{}:Object(m["a"])({},t),this.isNew=e;var o=this.$refs.CouponModal;o.showModel()},openDeleteModel:function(e){this.tempCoupon=Object(m["a"])({},e);var t=this.$refs.deleteModal;t.showModel()},getCoupon:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/admin/coupons?page=").concat(t);this.isLoading=!0,this.$http.get(o).then((function(t){e.isLoading=!1,t.data.success&&(e.coupons=t.data.coupons,e.coupons.forEach((function(e){e.due_date=Object(Q["b"])(e.due_date)})),e.pagination=t.data.pagination)}))},updateCoupon:function(e){var t=this;this.tempCoupon=e;var o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/admin/coupon"),n="post";this.isNew||(o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/admin/coupon/").concat(e.id),n="put");var c=this.$refs.CouponModal;this.$http[n](o,{data:this.tempCoupon}).then((function(e){c.hideModel(),"post"===n?t.$httpMessageState(e,"新增優惠卷"):t.$httpMessageState(e,"編輯優惠卷"),e.data.success&&t.getCoupon()}))},DeleteCoupon:function(e){var t=this,o="".concat("https://vue3-course-api.hexschool.io/","api/").concat("cofcat-api","/admin/coupon/").concat(e),n=this.$refs.deleteModal;this.$http.delete(o).then((function(e){n.hideModel(),t.$httpMessageState(e,"刪除優惠卷‘"),t.getCoupon()}))},convertDate:function(e){var t=new Date(1e3*e);return t.getFullYear()+"/"+t.getMonth()+"/"+t.getDate()}},created:function(){this.getCoupon()}};const W=q()(R,[["render",b]]);t["default"]=W},ccd6:function(e,t,o){"use strict";o("e7e1")},e7e1:function(e,t,o){}}]);
//# sourceMappingURL=chunk-0ab0c2f2.113b3a7f.js.map